const sgMail = require("@sendgrid/mail");
const domain = "mailgun.talentica.com";
const from_who = "nilesh.padwal@talentica.com";
const mg = require("mailgun-js")({ apiKey: process.env.MAILGUN_API_KEY, domain: domain });

const template = (email, id) => `<div style='width: 100%'>
<div style='display: flex; width: 100%; flex-direction: column'>
        <div style='background: orange; color: white; text-align: center'>
          <h3>Interview availability survey.</h3>
        </div>
      </div>
<br></br>
Hi,
<br></br>
Please respond to the survey confirming your availability for next 6 weeks, by today.  
<br></br>
Please give availability for multiple dates (Atleast one), we will make sure that you don’t have to come twice in a month.
<br></br>
I've invited you to fill in a form:
<br></br>
<strong><a href='http://172.19.101.133:3001/form/${email}/${id}'></strong>
Panel Availability
</a>
<br></br>
Please provide your availability to conduct interviews over next six weeks. Please select multiple dates, we will make sure that you don’t have to come twice in a month.
<br></br>
If you are not available on these dates please select other and mention when you can be available.
<br></br>

<strong>FILL OUT FORM</strong>
<br></br>
<img width='200' src='data:image/png;base64,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'/>
<br></br>
</div>`;
const sendMailViaSendgrid = (to, id) => {
    sgMail.setApiKey(process.env.SENDGRID_API_KEY);
    const msg = {
        to: "abhisar.tripathi@talentica.com",
        from: "nilesh.padwal@talentica.com",
        subject: "Sending with Twilio SendGrid is Fun.",
        text: "sample",
        html: template(to, id),
      };
    sgMail.send({ ...msg, to });
};

const sendMailViaMailgun = (to, id) => mg.messages().send(
  {
    template: "panelreminderemail",
    from: from_who,
    to,
    subject: "Panel Availability Details Form",
    "v:url": `http://172.19.101.133:3001/form/${to}/${id}`,
  },
  function(error, body) {
    console.log(body, error);
  }
);
module.exports = {sendMailViaSendgrid, sendMailViaMailgun};